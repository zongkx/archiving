### 1.简介

OAuth是一个关于授权（authorization）的开放网络标准，

oauth2根据使用场景不同，分成了4种模式

- 授权码模式（authorization code）,最复杂最常用的模式

> **第一步**：【A服务客户端】将用户自动导航到【B服务认证服务】，这一步用户需要提供一个回调地址，以备【B服务认证服务】返回授权码使用。
> **第二步**：用户点击授权按钮表示让【A服务客户端】使用【B服务资源服务】，这一步需要用户登录B服务，也就是说用户要事先具有B服务的使用权限。
> **第三步**：【B服务认证服务】生成授权码，授权码将通过第一步提供的回调地址，返回给【A服务客户端】。(注意这个授权码并非通行【B服务资源服务】的通行凭证。)
>
> **第四步**：【A服务认证服务】携带上一步得到的授权码向【B服务认证服务】发送请求，获取通行凭证`token`。
> **第五步**：【B服务认证服务】给【A服务认证服务】返回令牌`token`和更新令牌`refresh token`。

- 简化模式（implicit）

> **第一步**：【A服务客户端】将用户自动导航到【B服务认证服务】，这一步用户需要提供一个回调地址，以备【B服务认证服务】返回`token`使用，还会携带一个【A服务客户端】的状态标识`state`。
> **第二步**：用户点击授权按钮表示让【A服务客户端】使用【B服务资源服务】，这一步需要用户登录B服务，也就是说用户要事先具有B服务的使用权限。
>
> **第三步**：【 B服务认证服务】生成通行令牌`token`，`token`将通过第一步提供的回调地址，返回给【A服务客户端】。

- 密码模式（resource owner password credentials）

> **第一步**：直接告诉【A服务客户端】自己的【B服务认证服务】的用户名和密码
> **第二步**：【A服务客户端】携带【B服务认证服务】的用户名和密码向【B服务认证服务】发起请求获取
> `token`。
> **第三步**：【B服务认证服务】给【A服务客户端】颁发`token`。

- 客户端模式（client credentials）

> **第一步**：A服务向B服务索取`token`。
> **第二步**：B服务返回`token`给A服务。

